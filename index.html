<!DOCTYPE html>
<html>
<head>
<title>Challenge</title>
<style type="text/css">
html, body { height: 100%; background:#cccccc }

table{
  border-collapse: collapse;
}
</style>
</head>
<body>
<!--	<script src="https://enterprise.wibson.io/banner.js?siteId=294ae7e4-eeb8-4ebc-b483-aff33a22900a" type="text/javascript"></script>
<script src="./banner.js?siteId=294ae7e4-eeb8-4ebc-b483-aff33a22900a" type="text/javascript"></script>-->
<script src="./script.js?bkgcol=rgb(0,0,0)&pmcol=rgb(141,242,161)&fontcol=rgb(138,0,0)" type="text/javascript"></script>



<table border="1" style="width: 100%; height:100%">
	<tr><td></td></tr>
	<tr>
		<td></td>
		<td>
			<table style="width: 100%; height:100%; text-align: center;" border="1">
				<tr style="vertical-align: text-top;">




					<td width="33%">
						<h1>Crear</h1>
						Background Color=
						<input type="color" id="crear-background" />
						<br>
						Primary Color=
						<input type="color" id="crear-primaryColor">
						<br>
						Font Color=
						<input type="color" id="crear-fontcolor">
						<br> <br>
						<button type="button" onclick="fcrear()">Crear</button>
						<br> <br>
						<label id="respuesta-crear"></label>
					</td>

					<td width="33%">
						<h1>Editar</h1>
						Ingresar link=
						<input type="text" id="edit-link" onchange="editchange()">
						<br>	<br>
						Background Color=
						<input type="color" id="edit-background" />
						<br>
						Primary Color=
						<input type="color" id="edit-primaryColor">
						<br>
						Font Color=
						<input type="color" id="edit-fontcolor">
						<br> <br>
						<button type="button" onclick="fedit()">Editar</button>
						<br> <br>
						<label id="respuesta-edit"></label>
					</td>
					<td width="33%">
						<h1>Borrar</h1>
						Ingresar link=
						<input type="text" id="edit-link">
						<br>	<br>
						<button type="button" onclick="fborrar()">Borrar</button>
						<br> <br>
						<label id="respuesta-borrar"></label>
					</td>






				</tr>
			</table>
		</td>
		<td></td>
	</tr>
	<tr><td></td></tr>
</table>
<script type="text/javascript">
	function	fcrear(){
		var output = document.getElementById('respuesta-crear');
		var bkgcol = document.getElementById('crear-background').value;
		bkgcol = hexToRgb(bkgcol);
		var pmcol = document.getElementById('crear-primaryColor').value;
		pmcol = hexToRgb(pmcol);
		var fontcol = document.getElementById('crear-fontcolor').value;
		fontcol = hexToRgb(fontcol);
		var resultado = "bkgcol=" + bkgcol + "&pmcol=" + pmcol + "&fontcol=" + fontcol
		output.innerHTML = '&lt;script src="./script.js?' + resultado + '" type="text/javascript"&gt;&lt;/script&gt;'
	}

	function	editchange(){
				var output = document.getElementById('respuesta-edit');

		var input = document.getElementById('edit-link').value;
		input = input.replace(/ /g,'');
		input = input.slice(24, 95);
		var searchParams = new URLSearchParams(input);
		var bkcolor = searchParams.getAll('bkgcol');	
		var pmcolor = searchParams.getAll('pmcol');
		var fontcolor = searchParams.getAll('fontcol');
						var resultado = "bkgcol=" + bkcolor + "&pmcol=" + pmcolor + "&fontcol=" + fontcolor
		output.innerHTML = '&lt;script src="./script.js?' + resultado + '" type="text/javascript"&gt;&lt;/script&gt;'
		if(bkcolor == null){document.getElementById('edit-background').value = "#FFFFFF"}
		else{
			bkcolor_res = bkcolor[0].split(","); ////rgb(0  0  0)
			document.getElementById('edit-background').value = rgbToHex(bkcolor_res[0].match(/(\d+)/)[0], bkcolor_res[1].match(/(\d+)/)[0], bkcolor_res[2].match(/(\d+)/)[0])
		}
		// bkcolor
		
		if(pmcolor == null){document.getElementById('edit-primaryColor').value = "#AAAAAA"}
			else{
				pmcolor_res = pmcolor[0].split(","); ////rgb(0  0  0)
				document.getElementById('edit-primaryColor').value = rgbToHex(pmcolor_res[0].match(/(\d+)/)[0], pmcolor_res[1].match(/(\d+)/)[0], pmcolor_res[2].match(/(\d+)/)[0])
			}
		// pmcolor
		
		if(fontcolor == null){document.getElementById('edit-fontcolor').value = "#000000"}
			else{
				fontcolor_res = fontcolor[0].split(","); ////rgb(0  0  0)
				document.getElementById('edit-fontcolor').value = rgbToHex(fontcolor_res[0].match(/(\d+)/)[0], fontcolor_res[1].match(/(\d+)/)[0], fontcolor_res[2].match(/(\d+)/)[0])
			}
		//fontcolor	

	}

function fedit(){
			var output = document.getElementById('respuesta-edit');
		var bkgcol = document.getElementById('edit-background').value;
		bkgcol = hexToRgb(bkgcol);
		var pmcol = document.getElementById('edit-primaryColor').value;
		pmcol = hexToRgb(pmcol);
		var fontcol = document.getElementById('edit-fontcolor').value;
		fontcol = hexToRgb(fontcol);
		var resultado = "bkgcol=" + bkgcol + "&pmcol=" + pmcol + "&fontcol=" + fontcol
		output.innerHTML = '&lt;script src="./script.js?' + resultado + '" type="text/javascript"&gt;&lt;/script&gt;'
}

function rgbToHex(r,g,b) { 
  var hexr = Number(r).toString(16);
  if (hexr.length < 2) {
       hexr = "0" + hexr;
  }
  var hexg = Number(g).toString(16);
  if (hexg.length < 2) {
       hexg = "0" + hexg;
  }
  var hexb = Number(b).toString(16);
  if (hexb.length < 2) {
       hexb = "0" + hexb;
  }
  return "#" + hexr + hexg + hexb;
};

function hexToRgb(hex) {

  var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
  var erre = parseInt(result[1], 16);
  var ge = parseInt(result[2], 16);
  var ve = parseInt(result[3], 16);
  return result = "rgb(" + erre + "," + ge + "," + ve + ")"
  //rgb(75,0,166)
 
}
</script>
</body>
</html>